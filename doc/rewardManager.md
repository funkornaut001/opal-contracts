## Opal for liquidity providers

Liquidity providers receive a share of the rewards generated by omnipools based on the quantity of omnipool LP tokens they hold. The rewards acquired by the omnipool are contingent on the composition of its underlying pools, which currently consist solely of Aura.Finance pools.

These pools consistently distribute at least BAL and AURA tokens as rewards. In addition, underlying pools may provide other tokens. This other tokens are referred to as "extra-reward tokens." These extra-reward tokens are converted into GEM tokens, which serve Opal's governance purposes.

This implies that liquidity providers can only receive BAL, AURA, and GEM tokens.

### Rewards calculation

To claim their rewards, users must interact with the Opale omnipool contract. During this interaction, the omnipool will iterate through all its underlying pools to claim the rewards offered in exchange for providing liquidity. This process quantifies the rewards held by the omnipool at a specific epoch, enabling users who wish to recover their rewards to receive a quantity of tokens based on their share of the omnipool's LP.

Users will then receive a quantity of AURA, BAL, and GEM tokens depending on their share of the total omnipool LP tokens.

**WARNING, THIS IS NOT IMPLEMENTED YET**: Because omnipools are composed of multiple underlying pools, the gas consumption in the reward recovery process can be significant and potentially troublesome for users. Opal therefore proposes a system that brings together the interractions with the omnipool to calculate the quantity of rewards obtained by the omnipool over a given period only once.

### Conversion of Extra-Reward Tokens into GEM

#### Why do we swap extra-reward tokens for GEM token?

The tokens provided as rewards to the omnipool and obtained from its underlying pools can be BAL, AURA, or any other tokens, referred to as extra-reward tokens. While BAL and AURA tokens are directly distributed to liquidity providers, the extra-reward tokens are exchanged for GEM tokens and subsequently distributed.

There are two primary reasons for exchanging extra-reward tokens for GEM tokens:

- Firstly, we aim to provide Opale users with a consistent and straightforward user experience across all omnipools. This is achieved by disregarding extra-reward tokens and systematically ensuring that users receive their rewards in a clear and easy-to-manage format.

- This approach benefits the GEM token and incentivizes its liquidity provision.

#### How do we swap extra-reward tokens for GEM token?

To facilitate the exchange of extra-reward tokens for GEM tokens, a dedicated Balancer pool is required. For each extra-reward token, the DAO can initiate a vote to add a Balancer pool where the extra-reward tokens will be exchanged. In cases where the DAO does not propose a pool, the extra-reward tokens will be retained by the omnipool until a pool proposal is submitted and accepted by the DAO.

This system ensures that extra-reward tokens are efficiently converted into GEM tokens, maintaining a consistent user experience and contributing to the health of the GEM token within Opal's ecosystem.
